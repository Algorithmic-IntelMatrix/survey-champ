name = "surveychamp-runner-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Non-sensitive variables (embedded in worker)
[vars]
APP_URL = "https://builder.algorithmicintelmatrix.com"
SURVEY_URL = "https://survey.algorithmicintelmatrix.com"
BUILDER_API_URL = "https://api.algorithmicintelmatrix.com"

# Production environment
[env.production]
name = "surveychamp-runner-api-prod"
vars = { APP_URL = "https://builder.algorithmicintelmatrix.com", SURVEY_URL = "https://survey.algorithmicintelmatrix.com", BUILDER_API_URL = "https://api.algorithmicintelmatrix.com" }
routes = [
  { pattern = "runner-api.algorithmicintelmatrix.com/*", zone_name = "algorithmicintelmatrix.com" }
]

# Secrets (set via: wrangler secret put <NAME>)
# - UPSTASH_REDIS_REST_URL
# - UPSTASH_REDIS_REST_TOKEN
# - AWS_REGION (optional)
# - AWS_ACCESS_KEY_ID (optional)
# - AWS_SECRET_ACCESS_KEY (optional)
# - AWS_BUCKET_NAME (optional)